# Aperçu de l'implémentation {#core-ref:91e2017b-d595-47b3-bfc6-3b57c932b989}

Un cycle de vie est structuré au moyen d'une *famille de workflow* et d'un
*document de workflow*.

La *famille de workflow* permet de spécifier :

*   le graphe du cycle :
    *   la liste des étapes,
    *   la liste des méthodes déclenchées par chaque transition,
*   les attributs spécifiques au cycle :<span class="fixme"
    data-assignedto="EBR">c'est quoi?</span>
*   les paramètres de familles qui seront utilisables lors des traitements
    spécifiques liés aux cycles : pour chaque étape et chaque transition, un
    ensemble de paramètres est généré à partir de la structure.

Le *document de workflow* permet de spécifier le paramétrage :

*   les minuteurs, mails, etc. déclenchés à chaque étape ou transition
*   les acteurs et leurs droits au fil des différentes étapes du cycle

Généralement une *famille de workflow* ne produit qu'un seul *document
workflow*. Ce *document workflow* est ensuite utilisé pour gérer la vie de tous
les documents d'une famille. Il est toutefois possible de créer plusieurs
*documents workflow* issus d'une même famille avec des paramétrage différents.
Ils auront en commun la définition du cycle mais pourront avoir des paramétrages
différents.   Ainsi, par exemple :

*   sur une étape E1,
    *   un courriel au directeur sera envoyé pour le cycle C1
    *   un courriel au contrôleur sera pour le cycle C2.

De plus chacun des *documents workflow* possède sa propre définition de droits.
Ainsi, ce ne sont pas les mêmes acteurs qui jouent les différents rôles de
contrôleur, ou de rédacteur.

## Les transitions {#core-ref:ed74f035-ec6f-4e63-ae61-014a2947a6aa}

Un type de transition est composé  :

*   de deux conditions de passage de transition : `m0` et `m1`,
*   de deux traitements : `m2` et `m3`,
*   d'une confirmation du passage de la transition : `nr`,
*   d'une demande de paramètres de transition : `ask`.

Une transition suit le déroulement suivant :

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill-opacity="1" color-rendering="auto" color-interpolation="auto" stroke="black" text-rendering="auto" stroke-linecap="square" width="960" stroke-miterlimit="10" stroke-opacity="1" shape-rendering="auto" fill="black" stroke-dasharray="none" font-weight="normal" stroke-width="1" height="295" font-family="'Dialog'" font-style="normal" stroke-linejoin="miter" font-size="12" stroke-dashoffset="0" image-rendering="auto">
  <!--Generated by ySVG-->
  <defs id="genericDefs"/>
  <g>
    <defs id="defs1">
      <linearGradient x1="685.5569" gradientUnits="userSpaceOnUse" x2="873.8597" y1="269.0547" y2="331.9453" id="linearGradient1" spreadMethod="reflect">
        <stop stop-opacity="1" stop-color="rgb(232,238,247)" offset="0%"/>
        <stop stop-opacity="1" stop-color="rgb(183,201,227)" offset="100%"/>
      </linearGradient>
      <linearGradient x1="309.8486" gradientUnits="userSpaceOnUse" x2="498.1514" y1="382.5547" y2="445.4453" id="linearGradient2" spreadMethod="reflect">
        <stop stop-opacity="1" stop-color="rgb(232,238,247)" offset="0%"/>
        <stop stop-opacity="1" stop-color="rgb(183,201,227)" offset="100%"/>
      </linearGradient>
      <linearGradient x1="554.3069" gradientUnits="userSpaceOnUse" x2="742.6097" y1="382.5547" y2="445.4453" id="linearGradient3" spreadMethod="reflect">
        <stop stop-opacity="1" stop-color="rgb(232,238,247)" offset="0%"/>
        <stop stop-opacity="1" stop-color="rgb(183,201,227)" offset="100%"/>
      </linearGradient>
      <linearGradient x1="798.7653" gradientUnits="userSpaceOnUse" x2="987.0681" y1="382.5547" y2="445.4453" id="linearGradient4" spreadMethod="reflect">
        <stop stop-opacity="1" stop-color="rgb(232,238,247)" offset="0%"/>
        <stop stop-opacity="1" stop-color="rgb(183,201,227)" offset="100%"/>
      </linearGradient>
      <linearGradient x1="1043.2236" gradientUnits="userSpaceOnUse" x2="1231.5264" y1="382.5547" y2="445.4453" id="linearGradient5" spreadMethod="reflect">
        <stop stop-opacity="1" stop-color="rgb(232,238,247)" offset="0%"/>
        <stop stop-opacity="1" stop-color="rgb(183,201,227)" offset="100%"/>
      </linearGradient>
      <linearGradient x1="1287.682" gradientUnits="userSpaceOnUse" x2="1475.9847" y1="382.5547" y2="445.4453" id="linearGradient6" spreadMethod="reflect">
        <stop stop-opacity="1" stop-color="rgb(232,238,247)" offset="0%"/>
        <stop stop-opacity="1" stop-color="rgb(183,201,227)" offset="100%"/>
      </linearGradient>
      <linearGradient x1="65.3903" gradientUnits="userSpaceOnUse" x2="253.693" y1="155.5547" y2="218.4453" id="linearGradient7" spreadMethod="reflect">
        <stop stop-opacity="1" stop-color="rgb(232,238,247)" offset="0%"/>
        <stop stop-opacity="1" stop-color="rgb(183,201,227)" offset="100%"/>
      </linearGradient>
      <linearGradient x1="554.3069" gradientUnits="userSpaceOnUse" x2="742.6097" y1="155.5547" y2="218.4453" id="linearGradient8" spreadMethod="reflect">
        <stop stop-opacity="1" stop-color="rgb(232,238,247)" offset="0%"/>
        <stop stop-opacity="1" stop-color="rgb(183,201,227)" offset="100%"/>
      </linearGradient>
      <linearGradient x1="798.7653" gradientUnits="userSpaceOnUse" x2="987.0681" y1="155.5547" y2="218.4453" id="linearGradient9" spreadMethod="reflect">
        <stop stop-opacity="1" stop-color="rgb(232,238,247)" offset="0%"/>
        <stop stop-opacity="1" stop-color="rgb(183,201,227)" offset="100%"/>
      </linearGradient>
      <linearGradient x1="1043.2236" gradientUnits="userSpaceOnUse" x2="1231.5264" y1="155.5547" y2="218.4453" id="linearGradient10" spreadMethod="reflect">
        <stop stop-opacity="1" stop-color="rgb(232,238,247)" offset="0%"/>
        <stop stop-opacity="1" stop-color="rgb(183,201,227)" offset="100%"/>
      </linearGradient>
      <linearGradient x1="309.8486" gradientUnits="userSpaceOnUse" x2="498.1514" y1="155.5547" y2="218.4453" id="linearGradient11" spreadMethod="reflect">
        <stop stop-opacity="1" stop-color="rgb(232,238,247)" offset="0%"/>
        <stop stop-opacity="1" stop-color="rgb(183,201,227)" offset="100%"/>
      </linearGradient>
      <linearGradient x1="685.5569" gradientUnits="userSpaceOnUse" x2="873.8597" y1="19.5547" y2="82.4453" id="linearGradient12" spreadMethod="reflect">
        <stop stop-opacity="1" stop-color="rgb(232,238,247)" offset="0%"/>
        <stop stop-opacity="1" stop-color="rgb(183,201,227)" offset="100%"/>
      </linearGradient>
      <clipPath clipPathUnits="userSpaceOnUse" id="clipPath1">
        <path d="M0 0 L960 0 L960 295 L0 295 L0 0 Z"/>
      </clipPath>
      <clipPath clipPathUnits="userSpaceOnUse" id="clipPath2">
        <path d="M60 14 L1481 14 L1481 450.6615 L60 450.6615 L60 14 Z"/>
      </clipPath>
    </defs>
    <g fill="url(#linearGradient1)" transform="matrix(0.6756,0,0,0.6756,-40.5348,-9.4581)" stroke="url(#linearGradient1)">
      <path d="M685.5569 281.6328 C691.2061 269.0547 868.2106 269.0547 873.8597 281.6328 L873.8597 319.3672 C868.2106 331.9453 691.2061 331.9453 685.5569 319.3672 Z" clip-path="url(#clipPath2)" stroke="none"/>
    </g>
    <g stroke-linecap="butt" transform="matrix(0.6756,0,0,0.6756,-40.5348,-9.4581)" stroke-miterlimit="1.45">
      <path fill="none" d="M685.5569 281.6328 C691.2061 269.0547 868.2106 269.0547 873.8597 281.6328 L873.8597 319.3672 C868.2106 331.9453 691.2061 331.9453 685.5569 319.3672 Z" clip-path="url(#clipPath2)"/>
      <path fill="none" d="M873.8597 281.6328 C868.2106 294.2109 691.2061 294.2109 685.5569 281.6328" clip-path="url(#clipPath2)"/>
      <text x="734.6014" font-size="14" y="297.1982" clip-path="url(#clipPath2)" font-family="sans-serif" stroke="none" xml:space="preserve">Changement</text>
      <text x="759.2552" font-size="14" y="313.4951" clip-path="url(#clipPath2)" font-family="sans-serif" stroke="none" xml:space="preserve">d'état</text>
    </g>
    <g fill="url(#linearGradient2)" transform="matrix(0.6756,0,0,0.6756,-40.5348,-9.4581)" stroke="url(#linearGradient2)">
      <path d="M309.8486 382.5547 L498.1514 382.5547 L498.1514 445.4453 L309.8486 445.4453 Z" clip-path="url(#clipPath2)" stroke="none"/>
    </g>
    <g stroke-linecap="butt" transform="matrix(0.6756,0,0,0.6756,-40.5348,-9.4581)" stroke-miterlimit="1.45">
      <path fill="none" d="M309.8486 382.5547 L498.1514 382.5547 L498.1514 445.4453 L309.8486 445.4453 Z" clip-path="url(#clipPath2)"/>
      <text x="392.7275" font-size="14" y="418.8467" clip-path="url(#clipPath2)" font-family="sans-serif" stroke="none" xml:space="preserve">m2</text>
    </g>
    <g fill="url(#linearGradient3)" transform="matrix(0.6756,0,0,0.6756,-40.5348,-9.4581)" stroke="url(#linearGradient3)">
      <rect x="554.307" width="188.3027" height="62.8906" y="382.5547" clip-path="url(#clipPath2)" stroke="none"/>
    </g>
    <g stroke-linecap="butt" transform="matrix(0.6756,0,0,0.6756,-40.5348,-9.4581)" stroke-miterlimit="1.45">
      <rect fill="none" x="554.307" width="188.3027" height="62.8906" y="382.5547" clip-path="url(#clipPath2)"/>
      <path fill="none" d="M564.3069 382.5547 L564.3069 445.4453 M732.6097 382.5547 L732.6097 445.4453 M564.3069 382.5547 Z" clip-path="url(#clipPath2)"/>
      <text x="597.3836" font-size="14" y="418.8467" clip-path="url(#clipPath2)" font-family="sans-serif" stroke="none" xml:space="preserve">Envois de mail</text>
    </g>
    <g fill="url(#linearGradient4)" transform="matrix(0.6756,0,0,0.6756,-40.5348,-9.4581)" stroke="url(#linearGradient4)">
      <rect x="798.7653" width="188.3027" height="62.8906" y="382.5547" clip-path="url(#clipPath2)" stroke="none"/>
    </g>
    <g stroke-linecap="butt" transform="matrix(0.6756,0,0,0.6756,-40.5348,-9.4581)" stroke-miterlimit="1.45">
      <rect fill="none" x="798.7653" width="188.3027" height="62.8906" y="382.5547" clip-path="url(#clipPath2)"/>
      <path fill="none" d="M808.7653 382.5547 L808.7653 445.4453 M977.0681 382.5547 L977.0681 445.4453 M808.7653 382.5547 Z" clip-path="url(#clipPath2)"/>
      <text x="838.1745" font-size="14" y="402.5498" clip-path="url(#clipPath2)" font-family="sans-serif" stroke="none" xml:space="preserve">Attachement et</text>
      <text x="846.2341" font-size="14" y="418.8467" clip-path="url(#clipPath2)" font-family="sans-serif" stroke="none" xml:space="preserve">détachement</text>
      <text x="842.6452" font-size="14" y="435.1436" clip-path="url(#clipPath2)" font-family="sans-serif" stroke="none" xml:space="preserve">des minuteurs</text>
    </g>
    <g fill="url(#linearGradient5)" transform="matrix(0.6756,0,0,0.6756,-40.5348,-9.4581)" stroke="url(#linearGradient5)">
      <path d="M1043.2236 382.5547 L1231.5264 382.5547 L1231.5264 445.4453 L1043.2236 445.4453 Z" clip-path="url(#clipPath2)" stroke="none"/>
    </g>
    <g stroke-linecap="butt" transform="matrix(0.6756,0,0,0.6756,-40.5348,-9.4581)" stroke-miterlimit="1.45">
      <path fill="none" d="M1043.2236 382.5547 L1231.5264 382.5547 L1231.5264 445.4453 L1043.2236 445.4453 Z" clip-path="url(#clipPath2)"/>
      <text x="1126.1025" font-size="14" y="418.8467" clip-path="url(#clipPath2)" font-family="sans-serif" stroke="none" xml:space="preserve">m3</text>
    </g>
    <g fill="url(#linearGradient6)" transform="matrix(0.6756,0,0,0.6756,-40.5348,-9.4581)" stroke="url(#linearGradient6)">
      <rect x="1287.682" y="382.5547" clip-path="url(#clipPath2)" width="188.3027" rx="31.4453" ry="31.4453" height="62.8906" stroke="none"/>
    </g>
    <g stroke-linecap="butt" transform="matrix(0.6756,0,0,0.6756,-40.5348,-9.4581)" stroke-miterlimit="1.45">
      <rect x="1287.682" y="382.5547" clip-path="url(#clipPath2)" fill="none" width="188.3027" rx="31.4453" ry="31.4453" height="62.8906"/>
      <text x="1360.3207" font-size="14" y="402.5498" clip-path="url(#clipPath2)" font-family="sans-serif" stroke="none" xml:space="preserve">Fin du</text>
      <text x="1337.7655" font-size="14" y="418.8467" clip-path="url(#clipPath2)" font-family="sans-serif" stroke="none" xml:space="preserve">changement</text>
      <text x="1361.3802" font-size="14" y="435.1436" clip-path="url(#clipPath2)" font-family="sans-serif" stroke="none" xml:space="preserve">d'état</text>
    </g>
    <g fill="url(#linearGradient7)" transform="matrix(0.6756,0,0,0.6756,-40.5348,-9.4581)" stroke="url(#linearGradient7)">
      <ellipse rx="94.1514" ry="31.4453" clip-path="url(#clipPath2)" cx="159.5417" cy="187" stroke="none"/>
    </g>
    <g stroke-linecap="butt" transform="matrix(0.6756,0,0,0.6756,-40.5348,-9.4581)" stroke-miterlimit="1.45">
      <ellipse rx="94.1514" fill="none" ry="31.4453" clip-path="url(#clipPath2)" cx="159.5417" cy="187"/>
      <text x="114.5749" font-size="14" y="175.5498" clip-path="url(#clipPath2)" font-family="sans-serif" stroke="none" xml:space="preserve">Demande de</text>
      <text x="115.4738" font-size="14" y="191.8467" clip-path="url(#clipPath2)" font-family="sans-serif" stroke="none" xml:space="preserve">changement</text>
      <text x="139.0885" font-size="14" y="208.1436" clip-path="url(#clipPath2)" font-family="sans-serif" stroke="none" xml:space="preserve">d'état</text>
    </g>
    <g fill="url(#linearGradient8)" transform="matrix(0.6756,0,0,0.6756,-40.5348,-9.4581)" stroke="url(#linearGradient8)">
      <path d="M554.3069 165.5547 L742.6097 155.5547 L742.6097 218.4453 L554.3069 218.4453 Z" clip-path="url(#clipPath2)" stroke="none"/>
    </g>
    <g stroke-linecap="butt" transform="matrix(0.6756,0,0,0.6756,-40.5348,-9.4581)" stroke-miterlimit="1.45">
      <path fill="none" d="M554.3069 165.5547 L742.6097 155.5547 L742.6097 218.4453 L554.3069 218.4453 Z" clip-path="url(#clipPath2)"/>
      <text x="603.0472" font-size="14" y="175.5498" clip-path="url(#clipPath2)" font-family="sans-serif" stroke="none" xml:space="preserve">Confirmation</text>
      <text x="642.5931" font-size="14" y="191.8467" clip-path="url(#clipPath2)" font-family="sans-serif" stroke="none" xml:space="preserve">+</text>
      <text x="561.3069" font-size="14" y="208.1436" clip-path="url(#clipPath2)" font-family="sans-serif" stroke="none" xml:space="preserve">paramètres de transition</text>
    </g>
    <g fill="url(#linearGradient9)" transform="matrix(0.6756,0,0,0.6756,-40.5348,-9.4581)" stroke="url(#linearGradient9)">
      <path d="M892.9167 155.5547 L987.0681 187 L892.9167 218.4453 L798.7653 187 Z" clip-path="url(#clipPath2)" stroke="none"/>
    </g>
    <g stroke-linecap="butt" transform="matrix(0.6756,0,0,0.6756,-40.5348,-9.4581)" stroke-miterlimit="1.45">
      <path fill="none" d="M892.9167 155.5547 L987.0681 187 L892.9167 218.4453 L798.7653 187 Z" clip-path="url(#clipPath2)"/>
      <text x="881.6442" font-size="14" y="191.8467" clip-path="url(#clipPath2)" font-family="sans-serif" stroke="none" xml:space="preserve">m0</text>
    </g>
    <g fill="url(#linearGradient10)" transform="matrix(0.6756,0,0,0.6756,-40.5348,-9.4581)" stroke="url(#linearGradient10)">
      <path d="M1137.375 155.5547 L1231.5264 187 L1137.375 218.4453 L1043.2236 187 Z" clip-path="url(#clipPath2)" stroke="none"/>
    </g>
    <g stroke-linecap="butt" transform="matrix(0.6756,0,0,0.6756,-40.5348,-9.4581)" stroke-miterlimit="1.45">
      <path fill="none" d="M1137.375 155.5547 L1231.5264 187 L1137.375 218.4453 L1043.2236 187 Z" clip-path="url(#clipPath2)"/>
      <text x="1126.1025" font-size="14" y="191.8467" clip-path="url(#clipPath2)" font-family="sans-serif" stroke="none" xml:space="preserve">m1</text>
    </g>
    <g fill="url(#linearGradient11)" transform="matrix(0.6756,0,0,0.6756,-40.5348,-9.4581)" stroke="url(#linearGradient11)">
      <path d="M404 155.5547 L498.1514 187 L404 218.4453 L309.8486 187 Z" clip-path="url(#clipPath2)" stroke="none"/>
    </g>
    <g stroke-linecap="butt" transform="matrix(0.6756,0,0,0.6756,-40.5348,-9.4581)" stroke-miterlimit="1.45">
      <path fill="none" d="M404 155.5547 L498.1514 187 L404 218.4453 L309.8486 187 Z" clip-path="url(#clipPath2)"/>
      <text x="392.7275" font-size="14" y="191.8467" clip-path="url(#clipPath2)" font-family="sans-serif" stroke="none" xml:space="preserve">m0</text>
    </g>
    <g fill="url(#linearGradient12)" transform="matrix(0.6756,0,0,0.6756,-40.5348,-9.4581)" stroke="url(#linearGradient12)">
      <rect x="685.557" y="19.5547" clip-path="url(#clipPath2)" width="188.3027" rx="31.4453" ry="31.4453" height="62.8906" stroke="none"/>
    </g>
    <g stroke-linecap="butt" transform="matrix(0.6756,0,0,0.6756,-40.5348,-9.4581)" stroke-miterlimit="1.45">
      <rect x="685.557" y="19.5547" clip-path="url(#clipPath2)" fill="none" width="188.3027" rx="31.4453" ry="31.4453" height="62.8906"/>
      <text x="749.0286" font-size="14" y="47.6982" clip-path="url(#clipPath2)" font-family="sans-serif" stroke="none" xml:space="preserve">Message</text>
      <text x="751.657" font-size="14" y="63.9951" clip-path="url(#clipPath2)" font-family="sans-serif" stroke="none" xml:space="preserve">d'erreur</text>
    </g>
    <g stroke-linecap="butt" transform="matrix(0.6756,0,0,0.6756,-40.5348,-9.4581)" stroke-miterlimit="1.45">
      <path fill="none" d="M685.5519 300.5 L404 300.5 L404 374.5492" clip-path="url(#clipPath2)"/>
    </g>
    <g stroke-linecap="butt" transform="matrix(0.6756,0,0,0.6756,-40.5348,-9.4581)" stroke-miterlimit="1.45">
      <path d="M404 382.5492 L409 370.5492 L404 373.5492 L399 370.5492 Z" clip-path="url(#clipPath2)" stroke="none"/>
      <path fill="none" d="M498.1487 414 L546.3313 414" clip-path="url(#clipPath2)"/>
      <path d="M554.3313 414 L542.3313 409 L545.3313 414 L542.3313 419 Z" clip-path="url(#clipPath2)" stroke="none"/>
      <path fill="none" d="M742.607 414 L790.7897 414" clip-path="url(#clipPath2)"/>
      <path d="M798.7897 414 L786.7897 409 L789.7897 414 L786.7897 419 Z" clip-path="url(#clipPath2)" stroke="none"/>
      <path fill="none" d="M987.0654 414 L1035.248 414" clip-path="url(#clipPath2)"/>
      <path d="M1043.248 414 L1031.248 409 L1034.248 414 L1031.248 419 Z" clip-path="url(#clipPath2)" stroke="none"/>
      <path fill="none" d="M1231.5237 414 L1279.7063 414" clip-path="url(#clipPath2)"/>
      <path d="M1287.7063 414 L1275.7063 409 L1278.7063 414 L1275.7063 419 Z" clip-path="url(#clipPath2)" stroke="none"/>
      <path fill="none" d="M742.607 187 L790.7897 187" clip-path="url(#clipPath2)"/>
      <path d="M798.7897 187 L786.7897 182 L789.7897 187 L786.7897 192 Z" clip-path="url(#clipPath2)" stroke="none"/>
      <path fill="none" d="M987.0654 187 L1035.248 187" clip-path="url(#clipPath2)" stroke="rgb(51,153,102)"/>
      <path fill="rgb(51,153,102)" d="M1043.248 187 L1031.248 182 L1034.248 187 L1031.248 192 Z" clip-path="url(#clipPath2)" stroke="none"/>
      <text x="1006.4886" y="200.1387" clip-path="url(#clipPath2)" fill="rgb(51,153,102)" font-family="sans-serif" stroke="none" xml:space="preserve">OK</text>
      <path fill="none" d="M1137.375 218.4508 L1137.375 300.5 L881.884 300.5" clip-path="url(#clipPath2)" stroke="rgb(51,153,102)"/>
      <path fill="rgb(51,153,102)" d="M873.884 300.5 L885.884 305.5 L882.884 300.5 L885.884 295.5 Z" clip-path="url(#clipPath2)" stroke="none"/>
      <text x="884.025" y="313.6387" clip-path="url(#clipPath2)" fill="rgb(51,153,102)" font-family="sans-serif" stroke="none" xml:space="preserve">OK</text>
      <path fill="none" d="M253.6904 187 L301.873 187" clip-path="url(#clipPath2)"/>
      <path d="M309.873 187 L297.873 182 L300.873 187 L297.873 192 Z" clip-path="url(#clipPath2)" stroke="none"/>
      <path fill="none" d="M498.1487 187 L546.3313 187" clip-path="url(#clipPath2)" stroke="rgb(51,153,102)"/>
      <path fill="rgb(51,153,102)" d="M554.3313 187 L542.3313 182 L545.3313 187 L542.3313 192 Z" clip-path="url(#clipPath2)" stroke="none"/>
      <text x="503.5331" y="182.1699" clip-path="url(#clipPath2)" fill="rgb(51,153,102)" font-family="sans-serif" stroke="none" xml:space="preserve">OK</text>
      <path fill="none" d="M404 155.5566 L404 51 L677.5519 51" clip-path="url(#clipPath2)" stroke="red"/>
      <path fill="red" d="M685.5519 51 L673.5519 46 L676.5519 51 L673.5519 56 Z" clip-path="url(#clipPath2)" stroke="none"/>
      <text x="596.4549" y="46.1699" clip-path="url(#clipPath2)" fill="red" font-family="sans-serif" stroke="none" xml:space="preserve">KO</text>
      <path fill="none" d="M892.9167 155.5566 L892.9167 51 L881.8735 51" clip-path="url(#clipPath2)" stroke="red"/>
      <path fill="red" d="M873.8735 51 L885.8735 56 L882.8735 51 L885.8735 46 Z" clip-path="url(#clipPath2)" stroke="none"/>
      <text x="894.9167" y="142.2832" clip-path="url(#clipPath2)" fill="red" font-family="sans-serif" stroke="none" xml:space="preserve">KO</text>
      <path fill="none" d="M1137.375 155.5566 L1137.375 51 L881.884 51" clip-path="url(#clipPath2)" stroke="red"/>
      <path fill="red" d="M873.884 51 L885.884 56 L882.884 51 L885.884 46 Z" clip-path="url(#clipPath2)" stroke="none"/>
      <text x="1053.4277" y="64.1387" clip-path="url(#clipPath2)" fill="red" font-family="sans-serif" stroke="none" xml:space="preserve">KO</text>
    </g>
  </g>
</svg>

### `m0` {#core-ref:c3bcdf20-5756-4880-b067-36f0d62b68c5}

`m0` fait référence à une méthode de la classe de workflow. Cette méthode sert
à déterminer si le document est tel qu'il permet d'envisager la transition.

C'est la toute première méthode appelée lors d'une demande de transition.

Elle reçoit en paramètres :

1.  le libellé de la prochaine étape, (étape d'arrivée)
2.  le libellé de l'étape actuelle, (étape de départ)


Si elle retourne une chaîne vide, alors la transition peut être effectuée. dans
le cas contraire, elle doit retourner un message localisé qui indiquera à
l'utilisateur la raison pour laquelle la transition ne peut pas être effectuée.

*Note* : Cette méthode est aussi appelée lors de l'affichage de la liste des
états accessibles. Cela permet notamment de signaler à l'utilisateur les
transitions qu'il a le droit d'effectuer, mais pour lesquelles il doit faire des
modifications sur le document. De fait, cette méthode ne **doit pas modifier le
document**.

### Paramètres de transition {#core-ref:9e248e52-ad6b-4089-ab83-11a534b307e9}

Les *paramètres de transition* sont des [paramètres][family_parameters] du cycle
de vie, qui sont demandés à l'utilisateur lors de la transition. Ils doivent
être définis sur la famille de cycle de vie, et référencés dans la transition au
moyen de la clé `ask`, dans un tableau des ids de tous les paramètres à
utiliser.

Comme dans un document, l'interface correspondant à ces paramètres sera générée
par Dynacase ; les paramètres sont demandés par l'intermédiaire d'une fenêtre
modale.

**Attention** :Contrairement aux [paramètres de famille
ordinaires][family_parameters], les contraintes ne sont pas prises en compte
dans les paramètres de transition.

### Confirmation {#core-ref:a808e6bc-67f8-4666-b5ec-e9bc429a0eb5}

si `nr` n'est pas positionné à `true`, alors une confirmation est demandée.
Cette confirmation est affichée dans le même fenêtre que les paramètres de
transition (et cela instanciera la fenêtre de paramètres de transition à vide si
aucun n'est demandé).

### `m1` {#core-ref:603b0905-6269-4dca-a656-55e1d5524c3a}

`m1` fait référence à une méthode de la classe de workflow. Cette méthode sert
à modifier le document juste avant que la transition devienne effective. C'est
le document tel qu'il est à l'issue de la méthode `m1` qui sera sauvegardé dans
l'historique du document.

Elle reçoit en paramètres :

1.  le libellé de la prochaine étape, (étape d'arrivée)
2.  le libellé de l'étape actuelle, (étape de départ)
3.  le message de confirmation

Si elle retourne une chaîne vide, alors la transition peut être effectuée. dans
le cas contraire, elle doit retourner un message localisé qui indiquera à
l'utilisateur la raison pour laquelle la transition ne peut pas être effectuée.

### `m2` {#core-ref:ced2bc66-792e-4c55-bd0a-dcca09e9732d}

`m2` fait référence à une méthode de la classe de workflow. Cette méthode sert à
modifier le document juste après la transition. C'est le document tel qu'il est
à la suite de `m2` qui sera soumis aux minuteurs et envoyé par mail.

1.  le libellé de l'étape actuelle, (étape de départ)
2.  le libellé de la prochaine étape, (étape d'arrivée)
3.  le message de confirmation

Puisque `m2` intervient après le changement d'état, cette méthode n'est pas
bloquante. Aussi, retourner une chaîne d'erreur n'interrompt pas le processus
(mais le message d'erreur sera bien affiché à l'utilisateur à l'issue de la
transition).

### `m3` {#core-ref:39462cd9-7962-4efe-888b-912d7256671a}

`m3` fait référence à une méthode de la classe de workflow. Cette méthode est la
dernière exécutée au cours de la transition (c'est à dire qu'elle intervient
après les différents traitements automatiques effectués par Dynacase).

1.  le libellé de l'étape actuelle, (étape d'arrivée)
2.  le libellé de l'ancienne étape, (étape de départ)
3.  le message de confirmation

Elle n'est utile que dans de très rares cas, et est en particulier utilisée
lorsqu'une seconde transition doit être déclenchée automatiquement à l'issue de
la première.

## Le graphe {#core-ref:d176f897-3dae-46b5-834c-9b20dcd41c7d}

Le graphe est constitué d'un ensemble de triplets

*   État de départ
*   État d'arrivée
*   Une transition

Une fois assemblés, ces triplets définissent un Cycle de vie.

<!-- links -->
[family_parameters]: #core-ref:4595c8e7-5002-4dbc-b6bb-882b4123efd8